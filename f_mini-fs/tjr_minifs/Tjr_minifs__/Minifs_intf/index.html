<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Minifs_intf (tjr_minifs.Tjr_minifs__.Minifs_intf)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">tjr_minifs</a> &#x00BB; <a href="../index.html">Tjr_minifs__</a> &#x00BB; Minifs_intf</nav><h1>Module <code>Tjr_minifs__.Minifs_intf</code></h1><nav class="toc"><ul><li><a href="#misc">Misc</a></li><li><a href="#errors">Errors</a></li><li><a href="#stat-records">Stat records</a></li><li><a href="#msgs-btwn-client-and-server">Msgs btwn client and server</a></li><li><a href="#the-main-filesystem-operations:-unlink,-mkdir-etc">The main filesystem operations: unlink, mkdir etc</a></li></ul></nav></header><aside><p>Minifs main types; safe to open.</p><p>There is a lot of overlap with <span class="xref-unresolved" title="unresolved reference to &quot;Stdlib.Unix&quot;"><code>Stdlib</code>.Unix</span>. We want our code to run in contexts where Unix is not available. Thus, we have to define many equiv types. We also want to use eg the OCaml Fuse bindings, which use <span class="xref-unresolved" title="unresolved reference to &quot;Stdlib.Unix&quot;"><code>Stdlib</code>.Unix</span> types. So we need to be able to convert between our types and the existing types in Unix.</p><p>FIXME a lot of these types should be moved to fs_shared</p></aside><section><header><h3 id="misc"><a href="#misc" class="anchor"></a>Misc</h3></header><dl><dt class="spec type" id="type-buffer"><a href="#type-buffer" class="anchor"></a><code><span class="keyword">type</span> buffer</code><code> = <a href="../Bigarray_buffer/index.html#type-buffer">Tjr_minifs__.Bigarray_buffer.buffer</a></code></dt><dd><p>Alias</p></dd></dl><dl><dt class="spec type" id="type-buf"><a href="#type-buf" class="anchor"></a><code><span class="keyword">type</span> buf</code><code> = <a href="index.html#type-buffer">buffer</a></code></dt><dt class="spec type" id="type-r_"><a href="#type-r_" class="anchor"></a><code><span class="keyword">type</span> <span>('a, 'e) r_</span></code><code> = <span><span>(<span class="type-var">'a</span>, <span class="type-var">'e</span>)</span> Stdlib.result</span></code></dt><dd><p>Alias for result FIXME why?</p></dd></dl><dl><dt class="spec module" id="module-Int_base_types"><a href="#module-Int_base_types" class="anchor"></a><code><span class="keyword">module</span> <a href="Int_base_types/index.html">Int_base_types</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>fd and dh represented by ints... which is the usual underlying repn</p></dd></dl><dl><dt class="spec type" id="type-finished"><a href="#type-finished" class="anchor"></a><code><span class="keyword">type</span> finished</code><code> = </code><code>{</code><table class="record"><tr id="type-finished.finished" class="anchored"><td class="def field"><a href="#type-finished.finished" class="anchor"></a><code>finished : bool;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec module" id="module-Base_extra"><a href="#module-Base_extra" class="anchor"></a><code><span class="keyword">module</span> <a href="Base_extra/index.html">Base_extra</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Some utility functions</p></dd></dl><dl><dt class="spec value" id="val-exit_1"><a href="#val-exit_1" class="anchor"></a><code><span class="keyword">val</span> exit_1 : string <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt></dl></section><section><header><h3 id="errors"><a href="#errors" class="anchor"></a>Errors</h3></header><div class="spec module" id="module-Error_"><a href="#module-Error_" class="anchor"></a><code><span class="keyword">module</span> <a href="Error_/index.html">Error_</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec type" id="type-exn_"><a href="#type-exn_" class="anchor"></a><code><span class="keyword">type</span> exn_</code><code> = <a href="Error_/index.html#type-exn_">Error_.exn_</a></code></dt></dl><dl><dt class="spec module" id="module-Call_specific_errors"><a href="#module-Call_specific_errors" class="anchor"></a><code><span class="keyword">module</span> <a href="Call_specific_errors/index.html">Call_specific_errors</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Errors for each API function... an attempt to refine the different types of error each call can return FIXME needs further refinement</p></dd></dl></section><section><header><h3 id="stat-records"><a href="#stat-records" class="anchor"></a>Stat records</h3></header><div class="spec module" id="module-Kind"><a href="#module-Kind" class="anchor"></a><code><span class="keyword">module</span> <a href="Kind/index.html">Kind</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Times"><a href="#module-Times" class="anchor"></a><code><span class="keyword">module</span> <a href="Times/index.html">Times</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec type" id="type-times"><a href="#type-times" class="anchor"></a><code><span class="keyword">type</span> times</code><code> = <a href="Times/index.html#type-times">Times.times</a></code></dt></dl><div><div class="spec include"><div class="doc"><dl><dt class="spec value" id="val-bin_shape_times"><a href="#val-bin_shape_times" class="anchor"></a><code><span class="keyword">val</span> bin_shape_times : Bin_prot.Shape.t</code></dt><dt class="spec value" id="val-bin_size_times"><a href="#val-bin_size_times" class="anchor"></a><code><span class="keyword">val</span> bin_size_times : <span><a href="index.html#type-times">times</a> Bin_prot.Size.sizer</span></code></dt><dt class="spec value" id="val-bin_write_times"><a href="#val-bin_write_times" class="anchor"></a><code><span class="keyword">val</span> bin_write_times : <span><a href="index.html#type-times">times</a> Bin_prot.Write.writer</span></code></dt><dt class="spec value" id="val-bin_writer_times"><a href="#val-bin_writer_times" class="anchor"></a><code><span class="keyword">val</span> bin_writer_times : <span><a href="index.html#type-times">times</a> Bin_prot.Type_class.writer</span></code></dt><dt class="spec value" id="val-__bin_read_times__"><a href="#val-__bin_read_times__" class="anchor"></a><code><span class="keyword">val</span> __bin_read_times__ : <span><span>(int <span>&#45;&gt;</span> <a href="index.html#type-times">times</a>)</span> Bin_prot.Read.reader</span></code></dt><dt class="spec value" id="val-bin_read_times"><a href="#val-bin_read_times" class="anchor"></a><code><span class="keyword">val</span> bin_read_times : <span><a href="index.html#type-times">times</a> Bin_prot.Read.reader</span></code></dt><dt class="spec value" id="val-bin_reader_times"><a href="#val-bin_reader_times" class="anchor"></a><code><span class="keyword">val</span> bin_reader_times : <span><a href="index.html#type-times">times</a> Bin_prot.Type_class.reader</span></code></dt><dt class="spec value" id="val-bin_times"><a href="#val-bin_times" class="anchor"></a><code><span class="keyword">val</span> bin_times : <span><a href="index.html#type-times">times</a> Bin_prot.Type_class.t</span></code></dt></dl></div></div></div><dl><dt class="spec module" id="module-Stat_record"><a href="#module-Stat_record" class="anchor"></a><code><span class="keyword">module</span> <a href="Stat_record/index.html">Stat_record</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Simplified stat record</p></dd></dl><dl><dt class="spec type" id="type-stat_record"><a href="#type-stat_record" class="anchor"></a><code><span class="keyword">type</span> stat_record</code><code> = <a href="Stat_record/index.html#type-stat_record">Stat_record.stat_record</a></code></dt></dl><dl><dt class="spec module" id="module-St_convs"><a href="#module-St_convs" class="anchor"></a><code><span class="keyword">module</span> <a href="St_convs/index.html">St_convs</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Conversions to/from Unix equivalents</p></dd></dl></section><section><header><h3 id="msgs-btwn-client-and-server"><a href="#msgs-btwn-client-and-server" class="anchor"></a>Msgs btwn client and server</h3></header><div class="spec module" id="module-Msgs"><a href="#module-Msgs" class="anchor"></a><code><span class="keyword">module</span> <a href="Msgs/index.html">Msgs</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h3 id="the-main-filesystem-operations:-unlink,-mkdir-etc"><a href="#the-main-filesystem-operations:-unlink,-mkdir-etc" class="anchor"></a>The main filesystem operations: unlink, mkdir etc</h3></header><div class="spec module" id="module-Ops_type"><a href="#module-Ops_type" class="anchor"></a><code><span class="keyword">module</span> <a href="Ops_type/index.html">Ops_type</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec type" id="type-ops"><a href="#type-ops" class="anchor"></a><code><span class="keyword">type</span> <span>('fd, 'dh, 't) ops</span></code><code> = <span><span>(<span class="type-var">'fd</span>, <span class="type-var">'dh</span>, <span class="type-var">'t</span>)</span> <a href="Ops_type/index.html#type-ops">Ops_type.ops</a></span></code></dt><dt class="spec type" id="type-path"><a href="#type-path" class="anchor"></a><code><span class="keyword">type</span> path</code><code> = <a href="Ops_type/index.html#type-path">Ops_type.path</a></code></dt><dt class="spec type" id="type-co_eta"><a href="#type-co_eta" class="anchor"></a><code><span class="keyword">type</span> <span>'w co_eta</span></code><code> = </code><code>{</code><table class="record"><tr id="type-co_eta.co_eta" class="anchored"><td class="def field"><a href="#type-co_eta.co_eta" class="anchor"></a><code>co_eta : a. <span><span>(<span class="type-var">'a</span>, <span class="type-var">'w</span>)</span> Tjr_monad.m</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td></tr></table><code>}</code></dt><dd><p>Extract a value from a monad (Fuse lives in the real-world, so we need a way to project from a monad like lwt)</p></dd></dl></section></div></body></html>