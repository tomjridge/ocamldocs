<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tjr_profile (tjr_profile.Tjr_profile)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">tjr_profile</a> &#x00BB; Tjr_profile</nav><h1>Module <code>Tjr_profile</code></h1></header><div><div class="spec include"><div class="doc"><p>Profiling is controlled via optcomp flags. The <code>Optcomp_config</code> module records those values as OCaml values.</p><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../Tjr_profile__/index.html#module-Optcomp_config">Tjr_profile__.Optcomp_config</a></code></span></summary><aside><p>The underlying timing method is controlled by optcomp <code>PROFILING_USE_TSC</code> variable.</p></aside><dl><dt class="spec value" id="val-profiling_use_tsc"><a href="#val-profiling_use_tsc" class="anchor"></a><code><span class="keyword">val</span> profiling_use_tsc : bool</code></dt><dd><p>We ARE using TSC for profiling.</p></dd></dl><dl><dt class="spec value" id="val-now"><a href="#val-now" class="anchor"></a><code><span class="keyword">val</span> now : unit <span>&#45;&gt;</span> Core_kernel__.Import.int</code></dt><dt class="spec value" id="val-profiling_enabled"><a href="#val-profiling_enabled" class="anchor"></a><code><span class="keyword">val</span> profiling_enabled : bool</code></dt><dd><p>Profiling IS enabled (for profilers)</p></dd></dl></details></div></div></div><div class="spec module" id="module-Profile_intf"><a href="#module-Profile_intf" class="anchor"></a><code><span class="keyword">module</span> Profile_intf = <a href="../Tjr_profile__/index.html#module-Intf_">Tjr_profile__.Intf_</a></code></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="index.html#module-Profile_intf">Profile_intf</a></code></span></summary><aside></aside><dl><dt class="spec type" id="type-profiler"><a href="#type-profiler" class="anchor"></a><code><span class="keyword">type</span> <span>'waypoint profiler</span></code><code> = </code><code>{</code><table class="record"><tr id="type-profiler.mark" class="anchored"><td class="def field"><a href="#type-profiler.mark" class="anchor"></a><code>mark : <span class="type-var">'waypoint</span> <span>&#45;&gt;</span> unit;</code></td></tr><tr id="type-profiler.time_thunk" class="anchored"><td class="def field"><a href="#type-profiler.time_thunk" class="anchor"></a><code>time_thunk : a. <span class="type-var">'waypoint</span> <span>&#45;&gt;</span> <span>(unit <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td></tr><tr id="type-profiler.get_marks" class="anchored"><td class="def field"><a href="#type-profiler.get_marks" class="anchor"></a><code>get_marks : unit <span>&#45;&gt;</span> <span><span>(<span class="type-var">'waypoint</span> * int)</span> list</span>;</code></td></tr><tr id="type-profiler.print_summary" class="anchored"><td class="def field"><a href="#type-profiler.print_summary" class="anchor"></a><code>print_summary : unit <span>&#45;&gt;</span> unit;</code></td></tr></table><code>}</code></dt><dd><p>Profiler ops:</p><ul><li>mark: imperative mark command</li><li>get_marks: a list of all marked waypoints and the corresponding times at which they were marked</li><li>print_summary: print a human-readable summary (see <code>Pretty_print</code>)</li></ul></dd></dl><dl><dt class="spec type" id="type-stats"><a href="#type-stats" class="anchor"></a><code><span class="keyword">type</span> stats</code><code> = </code><code>{</code><table class="record"><tr id="type-stats.total" class="anchored"><td class="def field"><a href="#type-stats.total" class="anchor"></a><code>total : int;</code></td></tr><tr id="type-stats.count" class="anchored"><td class="def field"><a href="#type-stats.count" class="anchor"></a><code>count : int;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-profile_single"><a href="#type-profile_single" class="anchor"></a><code><span class="keyword">type</span> profile_single</code><code> = </code><code>{</code><table class="record"><tr id="type-profile_single.enter" class="anchored"><td class="def field"><a href="#type-profile_single.enter" class="anchor"></a><code>enter : unit <span>&#45;&gt;</span> unit;</code></td></tr><tr id="type-profile_single.exit" class="anchored"><td class="def field"><a href="#type-profile_single.exit" class="anchor"></a><code>exit : unit <span>&#45;&gt;</span> unit;</code></td></tr><tr id="type-profile_single.get_stats" class="anchored"><td class="def field"><a href="#type-profile_single.get_stats" class="anchor"></a><code>get_stats : unit <span>&#45;&gt;</span> <a href="index.html#type-stats">stats</a>;</code></td></tr></table><code>}</code></dt></dl><div class="spec module" id="module-Timed_result"><a href="#module-Timed_result" class="anchor"></a><code><span class="keyword">module</span> Timed_result = <a href="../Tjr_profile__/Intf_/index.html#module-Timed_result">Tjr_profile__.Intf_.Timed_result</a></code></div><dl><dt class="spec type" id="type-timed_result"><a href="#type-timed_result" class="anchor"></a><code><span class="keyword">type</span> <span>'a timed_result</span></code><code> = <span><span class="type-var">'a</span> <a href="Timed_result/index.html#type-timed_result">Timed_result.timed_result</a></span></code></dt></dl><dl><dt class="spec exception" id="exception-Profiling_exception"><a href="#exception-Profiling_exception" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Profiling_exception</span> <span class="keyword">of</span> string</code></dt></dl></details></div></div></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../Tjr_profile__/index.html#module-Util">Tjr_profile__.Util</a></code></span></summary><dl><dt class="spec module" id="module-Make_intern"><a href="#module-Make_intern" class="anchor"></a><code><span class="keyword">module</span> Make_intern = <a href="../Tjr_profile__/Util/index.html#module-Make_intern">Tjr_profile__.Util.Make_intern</a></code></dt><dd><p>Intern (allocate an integer for) objects FIXME move to tjr_lib</p></dd></dl><div class="spec module" id="module-Make_intern_2"><a href="#module-Make_intern_2" class="anchor"></a><code><span class="keyword">module</span> Make_intern_2 = <a href="../Tjr_profile__/Util/index.html#module-Make_intern_2">Tjr_profile__.Util.Make_intern_2</a></code></div><div class="spec module" id="module-Intern"><a href="#module-Intern" class="anchor"></a><code><span class="keyword">module</span> Intern = <a href="../Tjr_profile__/Util/index.html#module-Intern">Tjr_profile__.Util.Intern</a></code></div><dl><dt class="spec value" id="val-measure_execution_time_and_print"><a href="#val-measure_execution_time_and_print" class="anchor"></a><code><span class="keyword">val</span> measure_execution_time_and_print : string <span>&#45;&gt;</span> <span>(unit <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Measure execution time, and print result on output immediately. This is not affected by optcomp config.</p></dd></dl><dl><dt class="spec value" id="val-measure_execution_time"><a href="#val-measure_execution_time" class="anchor"></a><code><span class="keyword">val</span> measure_execution_time : <span>(unit <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../Tjr_profile__Intf_/Timed_result/index.html#type-timed_result">Tjr_profile__.Intf_.Timed_result.timed_result</a></span></code></dt><dd><p>Measure the execution time of a function, and return the function result and the execution time. This is not affected by optcomp config.</p></dd></dl><dl><dt class="spec value" id="val-dummy_profiler"><a href="#val-dummy_profiler" class="anchor"></a><code><span class="keyword">val</span> dummy_profiler : <span><span class="type-var">'a</span> <a href="../Tjr_profile__/Intf_/index.html#type-profiler">Tjr_profile__.Intf_.profiler</a></span></code></dt></dl></details></div></div></div><dl><dt class="spec module" id="module-Profile_single_function"><a href="#module-Profile_single_function" class="anchor"></a><code><span class="keyword">module</span> <a href="Profile_single_function/index.html">Profile_single_function</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Profile a single function using &quot;enter&quot; and &quot;exit&quot;. The function may be called many times. This keeps track of the number of times, and the total time.</p></dd></dl><div class="spec module" id="module-With_array"><a href="#module-With_array" class="anchor"></a><code><span class="keyword">module</span> <a href="With_array/index.html">With_array</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-intern"><a href="#val-intern" class="anchor"></a><code><span class="keyword">val</span> intern : string <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-make_profiler"><a href="#val-make_profiler" class="anchor"></a><code><span class="keyword">val</span> make_profiler : <span>?&#8288;print_header:string</span> <span>&#45;&gt;</span> <span>?&#8288;cap:int</span> <span>&#45;&gt;</span> <span>?&#8288;print_at_exit:bool</span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span>int <a href="../Tjr_profile__/Intf_/index.html#type-profiler">Tjr_profile__.Intf_.profiler</a></span></code></dt><dt class="spec value" id="val-dummy_profiler"><a href="#val-dummy_profiler" class="anchor"></a><code><span class="keyword">val</span> dummy_profiler : <span><span class="type-var">'a</span> <a href="../Tjr_profile__/Intf_/index.html#type-profiler">Tjr_profile__.Intf_.profiler</a></span></code></dt></dl></div></body></html>