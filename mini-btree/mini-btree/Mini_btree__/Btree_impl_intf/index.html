<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Btree_impl_intf (mini-btree.Mini_btree__.Btree_impl_intf)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">mini-btree</a> &#x00BB; <a href="../index.html">Mini_btree__</a> &#x00BB; Btree_impl_intf</nav><h1>Module <code>Mini_btree__.Btree_impl_intf</code></h1></header><aside><p>Main implementation types</p></aside><dl><dt class="spec type" id="type-constants"><a href="#type-constants" class="anchor"></a><code><span class="keyword">type</span> constants</code><code> = </code><code>{</code><table class="record"><tr id="type-constants.max_leaf_keys" class="anchored"><td class="def field"><a href="#type-constants.max_leaf_keys" class="anchor"></a><code>max_leaf_keys : int;</code></td></tr><tr id="type-constants.max_branch_keys" class="anchored"><td class="def field"><a href="#type-constants.max_branch_keys" class="anchor"></a><code>max_branch_keys : int;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-make_constants"><a href="#val-make_constants" class="anchor"></a><code><span class="keyword">val</span> make_constants : <span>blk_sz:int</span> <span>&#45;&gt;</span> <span>k_sz:int</span> <span>&#45;&gt;</span> <span>v_sz:int</span> <span>&#45;&gt;</span> <a href="index.html#type-constants">constants</a></code></dt><dd><p>Calculate constants given blk size and k and v size. NOTE assumes type r = int</p></dd></dl><dl><dt class="spec type" id="type-k_cmp"><a href="#type-k_cmp" class="anchor"></a><code><span class="keyword">type</span> <span>'k k_cmp</span></code><code> = </code><code>{</code><table class="record"><tr id="type-k_cmp.k_cmp" class="anchored"><td class="def field"><a href="#type-k_cmp.k_cmp" class="anchor"></a><code>k_cmp : <span class="type-var">'k</span> <span>&#45;&gt;</span> <span class="type-var">'k</span> <span>&#45;&gt;</span> int;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-leaf_ops"><a href="#type-leaf_ops" class="anchor"></a><code><span class="keyword">type</span> <span>('k, 'v, 'leaf) leaf_ops</span></code><code> = </code><code>{</code><table class="record"><tr id="type-leaf_ops.lookup" class="anchored"><td class="def field"><a href="#type-leaf_ops.lookup" class="anchor"></a><code>lookup : <span class="type-var">'k</span> <span>&#45;&gt;</span> <span class="type-var">'leaf</span> <span>&#45;&gt;</span> <span><span class="type-var">'v</span> option</span>;</code></td></tr><tr id="type-leaf_ops.insert" class="anchored"><td class="def field"><a href="#type-leaf_ops.insert" class="anchor"></a><code>insert : <span class="type-var">'k</span> <span>&#45;&gt;</span> <span class="type-var">'v</span> <span>&#45;&gt;</span> <span class="type-var">'leaf</span> <span>&#45;&gt;</span> unit;</code></td></tr><tr id="type-leaf_ops.remove" class="anchored"><td class="def field"><a href="#type-leaf_ops.remove" class="anchor"></a><code>remove : <span class="type-var">'k</span> <span>&#45;&gt;</span> <span class="type-var">'leaf</span> <span>&#45;&gt;</span> unit;</code></td></tr><tr id="type-leaf_ops.leaf_nkeys" class="anchored"><td class="def field"><a href="#type-leaf_ops.leaf_nkeys" class="anchor"></a><code>leaf_nkeys : <span class="type-var">'leaf</span> <span>&#45;&gt;</span> int;</code></td></tr><tr id="type-leaf_ops.split_leaf" class="anchored"><td class="def field"><a href="#type-leaf_ops.split_leaf" class="anchor"></a><code>split_leaf : int <span>&#45;&gt;</span> <span class="type-var">'leaf</span> <span>&#45;&gt;</span> <span class="type-var">'leaf</span> * <span class="type-var">'k</span> * <span class="type-var">'leaf</span>;</code></td></tr><tr id="type-leaf_ops.to_kvs" class="anchored"><td class="def field"><a href="#type-leaf_ops.to_kvs" class="anchor"></a><code>to_kvs : <span class="type-var">'leaf</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'k</span> * <span class="type-var">'v</span>)</span> list</span>;</code></td></tr><tr id="type-leaf_ops.of_kvs" class="anchored"><td class="def field"><a href="#type-leaf_ops.of_kvs" class="anchor"></a><code>of_kvs : <span><span>(<span class="type-var">'k</span> * <span class="type-var">'v</span>)</span> list</span> <span>&#45;&gt;</span> <span class="type-var">'leaf</span>;</code></td></tr></table><code>}</code></dt><dd><p>NOTE Leaves are mutable</p></dd></dl><div class="spec module" id="module-Top_or_bottom"><a href="#module-Top_or_bottom" class="anchor"></a><code><span class="keyword">module</span> <a href="Top_or_bottom/index.html">Top_or_bottom</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-k_lt"><a href="#val-k_lt" class="anchor"></a><code><span class="keyword">val</span> k_lt : <span>k_cmp:<span><span class="type-var">'a</span> <a href="index.html#type-k_cmp">k_cmp</a></span></span> <span>&#45;&gt;</span> <span>k1:<span class="type-var">'a</span></span> <span>&#45;&gt;</span> <span>k2:<span><span class="type-var">'a</span> option</span></span> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-k_leq"><a href="#val-k_leq" class="anchor"></a><code><span class="keyword">val</span> k_leq : <span>k_cmp:<span><span class="type-var">'a</span> <a href="index.html#type-k_cmp">k_cmp</a></span></span> <span>&#45;&gt;</span> <span>k1:<span><span class="type-var">'a</span> option</span></span> <span>&#45;&gt;</span> <span>k2:<span class="type-var">'a</span></span> <span>&#45;&gt;</span> bool</code></dt></dl><dl><dt class="spec type" id="type-segment"><a href="#type-segment" class="anchor"></a><code><span class="keyword">type</span> <span>('k, 'r) segment</span></code><code> = <span><span class="type-var">'k</span> <a href="Top_or_bottom/index.html#type-or_bottom">Top_or_bottom.or_bottom</a></span> * <span class="type-var">'r</span> * <span><span>(<span class="type-var">'k</span> * <span class="type-var">'r</span>)</span> list</span> * <span><span class="type-var">'k</span> <a href="Top_or_bottom/index.html#type-or_top">Top_or_bottom.or_top</a></span></code></dt><dt class="spec type" id="type-branch_ops"><a href="#type-branch_ops" class="anchor"></a><code><span class="keyword">type</span> <span>('k, 'r, 'branch) branch_ops</span></code><code> = </code><code>{</code><table class="record"><tr id="type-branch_ops.find" class="anchored"><td class="def field"><a href="#type-branch_ops.find" class="anchor"></a><code>find : <span class="type-var">'k</span> <span>&#45;&gt;</span> <span class="type-var">'branch</span> <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="Top_or_bottom/index.html#type-or_bottom">Top_or_bottom.or_bottom</a></span> * <span class="type-var">'r</span> * <span><span class="type-var">'k</span> <a href="Top_or_bottom/index.html#type-or_top">Top_or_bottom.or_top</a></span>;</code></td></tr><tr id="type-branch_ops.branch_nkeys" class="anchored"><td class="def field"><a href="#type-branch_ops.branch_nkeys" class="anchor"></a><code>branch_nkeys : <span class="type-var">'branch</span> <span>&#45;&gt;</span> int;</code></td></tr><tr id="type-branch_ops.split_branch" class="anchored"><td class="def field"><a href="#type-branch_ops.split_branch" class="anchor"></a><code>split_branch : int <span>&#45;&gt;</span> <span class="type-var">'branch</span> <span>&#45;&gt;</span> <span class="type-var">'branch</span> * <span class="type-var">'k</span> * <span class="type-var">'branch</span>;</code></td></tr><tr id="type-branch_ops.make_small_root" class="anchored"><td class="def field"><a href="#type-branch_ops.make_small_root" class="anchor"></a><code>make_small_root : <span>(<span class="type-var">'r</span> * <span class="type-var">'k</span> * <span class="type-var">'r</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'branch</span>;</code></td></tr><tr id="type-branch_ops.to_krs" class="anchored"><td class="def field"><a href="#type-branch_ops.to_krs" class="anchor"></a><code>to_krs : <span class="type-var">'branch</span> <span>&#45;&gt;</span> <span><span class="type-var">'k</span> list</span> * <span><span class="type-var">'r</span> list</span>;</code></td></tr><tr id="type-branch_ops.of_krs" class="anchored"><td class="def field"><a href="#type-branch_ops.of_krs" class="anchor"></a><code>of_krs : <span>(<span><span class="type-var">'k</span> list</span> * <span><span class="type-var">'r</span> list</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'branch</span>;</code></td></tr><tr id="type-branch_ops.replace" class="anchored"><td class="def field"><a href="#type-branch_ops.replace" class="anchor"></a><code>replace : <span><span>(<span class="type-var">'k</span>, <span class="type-var">'r</span>)</span> <a href="index.html#type-segment">segment</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'k</span>, <span class="type-var">'r</span>)</span> <a href="index.html#type-segment">segment</a></span> <span>&#45;&gt;</span> <span class="type-var">'branch</span> <span>&#45;&gt;</span> unit;</code></td></tr></table><code>}</code></dt><dd><p>NOTE Nodes are mutable</p></dd></dl><dl><dt class="spec type" id="type-node_ops"><a href="#type-node_ops" class="anchor"></a><code><span class="keyword">type</span> <span>('branch, 'leaf, 'node) node_ops</span></code><code> = </code><code>{</code><table class="record"><tr id="type-node_ops.cases" class="anchored"><td class="def field"><a href="#type-node_ops.cases" class="anchor"></a><code>cases : a. <span class="type-var">'node</span> <span>&#45;&gt;</span> <span>leaf:<span>(<span class="type-var">'leaf</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span>branch:<span>(<span class="type-var">'branch</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td></tr><tr id="type-node_ops.of_leaf" class="anchored"><td class="def field"><a href="#type-node_ops.of_leaf" class="anchor"></a><code>of_leaf : <span class="type-var">'leaf</span> <span>&#45;&gt;</span> <span class="type-var">'node</span>;</code></td></tr><tr id="type-node_ops.of_branch" class="anchored"><td class="def field"><a href="#type-node_ops.of_branch" class="anchor"></a><code>of_branch : <span class="type-var">'branch</span> <span>&#45;&gt;</span> <span class="type-var">'node</span>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-store_ops"><a href="#type-store_ops" class="anchor"></a><code><span class="keyword">type</span> <span>('r, 'node) store_ops</span></code><code> = </code><code>{</code><table class="record"><tr id="type-store_ops.read" class="anchored"><td class="def field"><a href="#type-store_ops.read" class="anchor"></a><code>read : <span class="type-var">'r</span> <span>&#45;&gt;</span> <span class="type-var">'node</span>;</code></td></tr><tr id="type-store_ops.write" class="anchored"><td class="def field"><a href="#type-store_ops.write" class="anchor"></a><code>write : <span class="type-var">'r</span> <span>&#45;&gt;</span> <span class="type-var">'node</span> <span>&#45;&gt;</span> unit;</code></td></tr><tr id="type-store_ops.flush" class="anchored"><td class="def field"><a href="#type-store_ops.flush" class="anchor"></a><code>flush : unit <span>&#45;&gt;</span> unit;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-free"><a href="#type-free" class="anchor"></a><code><span class="keyword">type</span> <span>'r free</span></code><code> = </code><code>{</code><table class="record"><tr id="type-free.free" class="anchored"><td class="def field"><a href="#type-free.free" class="anchor"></a><code>free : <span><span class="type-var">'r</span> list</span>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-new_root"><a href="#type-new_root" class="anchor"></a><code><span class="keyword">type</span> <span>'r new_root</span></code><code> = </code><code>{</code><table class="record"><tr id="type-new_root.new_root" class="anchored"><td class="def field"><a href="#type-new_root.new_root" class="anchor"></a><code>new_root : <span class="type-var">'r</span>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-insert_many_return_type"><a href="#type-insert_many_return_type" class="anchor"></a><code><span class="keyword">type</span> <span>('k, 'v, 'r) insert_many_return_type</span></code><code> = </code><table class="variant"><tr id="type-insert_many_return_type.Rebuilt" class="anchored"><td class="def constructor"><a href="#type-insert_many_return_type.Rebuilt" class="anchor"></a><code>| </code><code><span class="constructor">Rebuilt</span> <span class="keyword">of</span> <span><span class="type-var">'r</span> <a href="index.html#type-free">free</a></span> * <span><span><span class="type-var">'r</span> <a href="index.html#type-new_root">new_root</a></span> option</span> * <span><span>(<span class="type-var">'k</span> * <span class="type-var">'v</span>)</span> list</span></code></td></tr><tr id="type-insert_many_return_type.Remaining" class="anchored"><td class="def constructor"><a href="#type-insert_many_return_type.Remaining" class="anchor"></a><code>| </code><code><span class="constructor">Remaining</span> <span class="keyword">of</span> <span><span>(<span class="type-var">'k</span> * <span class="type-var">'v</span>)</span> list</span></code></td></tr><tr id="type-insert_many_return_type.Unchanged_no_kvs" class="anchored"><td class="def constructor"><a href="#type-insert_many_return_type.Unchanged_no_kvs" class="anchor"></a><code>| </code><code><span class="constructor">Unchanged_no_kvs</span></code></td></tr></table></dt><dt class="spec type" id="type-export_t"><a href="#type-export_t" class="anchor"></a><code><span class="keyword">type</span> <span>('k, 'v, 'r) export_t</span></code> = <code>[ </code><table class="variant"><tr id="type-export_t.On_disk" class="anchored"><td class="def constructor"><a href="#type-export_t.On_disk" class="anchor"></a><code>| </code><code>`On_disk <span class="keyword">of</span> <span class="type-var">'r</span> * <span>[ <span>`Leaf of <span><span>(<span class="type-var">'k</span> * <span class="type-var">'v</span>)</span> list</span></span> <span><span>| `Branch</span> of <span><span class="type-var">'k</span> list</span> * <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'r</span>)</span> <a href="index.html#type-export_t">export_t</a></span> list</span></span> ]</span></code></td></tr></table><code> ]</code></dt><dd><p>Types used for exporting/importing only</p></dd></dl><dl><dt class="spec type" id="type-btree_ops"><a href="#type-btree_ops" class="anchor"></a><code><span class="keyword">type</span> <span>('k, 'v, 'r) btree_ops</span></code><code> = </code><code>{</code><table class="record"><tr id="type-btree_ops.find" class="anchored"><td class="def field"><a href="#type-btree_ops.find" class="anchor"></a><code>find : <span>r:<span class="type-var">'r</span></span> <span>&#45;&gt;</span> <span>k:<span class="type-var">'k</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'v</span> option</span>;</code></td></tr><tr id="type-btree_ops.insert" class="anchored"><td class="def field"><a href="#type-btree_ops.insert" class="anchor"></a><code>insert : <span>k:<span class="type-var">'k</span></span> <span>&#45;&gt;</span> <span>v:<span class="type-var">'v</span></span> <span>&#45;&gt;</span> <span>r:<span class="type-var">'r</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'r</span> <a href="index.html#type-free">free</a></span> * <span><span><span class="type-var">'r</span> <a href="index.html#type-new_root">new_root</a></span> option</span>;</code></td></tr><tr id="type-btree_ops.insert_many" class="anchored"><td class="def field"><a href="#type-btree_ops.insert_many" class="anchor"></a><code>insert_many : <span>kvs:<span><span>(<span class="type-var">'k</span> * <span class="type-var">'v</span>)</span> list</span></span> <span>&#45;&gt;</span> <span>r:<span class="type-var">'r</span></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'r</span>)</span> <a href="index.html#type-insert_many_return_type">insert_many_return_type</a></span>;</code></td></tr><tr id="type-btree_ops.delete" class="anchored"><td class="def field"><a href="#type-btree_ops.delete" class="anchor"></a><code>delete : <span>k:<span class="type-var">'k</span></span> <span>&#45;&gt;</span> <span>r:<span class="type-var">'r</span></span> <span>&#45;&gt;</span> unit;</code></td></tr><tr id="type-btree_ops.export" class="anchored"><td class="def field"><a href="#type-btree_ops.export" class="anchor"></a><code>export : <span class="type-var">'r</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'r</span>)</span> <a href="index.html#type-export_t">export_t</a></span>;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec module-type" id="module-type-S_kvr"><a href="#module-type-S_kvr" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S_kvr/index.html">S_kvr</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>What we need to construct the B-tree</p></dd></dl><dl><dt class="spec module-type" id="module-type-T"><a href="#module-type-T" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-T/index.html">T</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>What we get after constructing the B-tree</p></dd></dl><dl><dt class="spec module-type" id="module-type-MAKE"><a href="#module-type-MAKE" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-MAKE/index.html">MAKE</a> = <span class="keyword">functor</span> (<a href="module-type-MAKE/argument-1-S/index.html">S</a> : <a href="index.html#module-type-S_kvr">S_kvr</a>) <span>&#45;&gt;</span> <a href="index.html#module-type-T">T</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-MAKE/index.html#type-k">k</a> = <a href="module-type-MAKE/argument-1-S/index.html#type-k">S.k</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="module-type-MAKE/index.html#type-v">v</a> = <a href="module-type-MAKE/argument-1-S/index.html#type-v">S.v</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="module-type-MAKE/index.html#type-r">r</a> = <a href="module-type-MAKE/argument-1-S/index.html#type-r">S.r</a></code></dt><dd><p>Type of the make functor</p></dd></dl><dl><dt class="spec value" id="val-blk_sz_4096"><a href="#val-blk_sz_4096" class="anchor"></a><code><span class="keyword">val</span> blk_sz_4096 : int</code></dt></dl><dl><dt class="spec module" id="module-Int_int"><a href="#module-Int_int" class="anchor"></a><code><span class="keyword">module</span> <a href="Int_int/index.html">Int_int</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Example, k=int, v=int, r=int</p></dd></dl><div class="spec module-type" id="module-type-EXAMPLE_INT_INT"><a href="#module-type-EXAMPLE_INT_INT" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-EXAMPLE_INT_INT/index.html">EXAMPLE_INT_INT</a> = <a href="index.html#module-type-T">T</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-EXAMPLE_INT_INT/index.html#type-k">k</a> = int <span class="keyword">and</span> <span class="keyword">type</span> <a href="module-type-EXAMPLE_INT_INT/index.html#type-v">v</a> = int <span class="keyword">and</span> <span class="keyword">type</span> <a href="module-type-EXAMPLE_INT_INT/index.html#type-r">r</a> = int</code></div></div></body></html>