<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Make (tjr_kv.Tjr_kv__Kv_store_with_lru.Make)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">tjr_kv</a> &#x00BB; <a href="../index.html">Tjr_kv__Kv_store_with_lru</a> &#x00BB; Make</nav><h1>Module <code>Tjr_kv__Kv_store_with_lru.Make</code></h1><nav class="toc"><ul><li><a href="#message-queues">Message queues</a></li><li><a href="#blk_dev_ops-ref">Blk_dev_ops ref</a></li><li><a href="#root-manager">Root manager</a></li><li><a href="#blk-allocator">Blk allocator</a></li><li><a href="#b-tree/btree-ops/bt-thread">B-tree/btree ops/bt thread</a></li><li><a href="#pcache-and-pcache_thread">Pcache and pcache_thread</a></li><li><a href="#lru-cache">LRU cache</a></li></ul></nav></header><h3 class="heading">Parameters</h3><ul><li><code><a href="argument-1-S/index.html">S</a> : <a href="../index.html#module-type-S">S</a></code></li></ul><h3 class="heading">Signature</h3><section><header><h3 id="message-queues"><a href="#message-queues" class="anchor"></a>Message queues</h3></header><dl><dt class="spec value" id="val-q_lru_pc"><a href="#val-q_lru_pc" class="anchor"></a><code><span class="keyword">val</span> q_lru_pc : <span><span>(<a href="argument-1-S/index.html#type-k">S.k</a>, <a href="argument-1-S/index.html#type-v">S.v</a>)</span> <a href="../../Tjr_kv/Kv_intf_v2/class-type-q_lru_pc/index.html">Tjr_kv.Kv_intf_v2.q_lru_pc</a></span></code></dt><dt class="spec value" id="val-q_pc_bt"><a href="#val-q_pc_bt" class="anchor"></a><code><span class="keyword">val</span> q_pc_bt : <span><span>(<a href="argument-1-S/index.html#type-k">S.k</a>, <a href="argument-1-S/index.html#type-v">S.v</a>)</span> <a href="../../Tjr_kv/Kv_intf_v2/class-type-q_pc_bt/index.html">Tjr_kv.Kv_intf_v2.q_pc_bt</a></span></code></dt></dl></section><section><header><h3 id="blk_dev_ops-ref"><a href="#blk_dev_ops-ref" class="anchor"></a>Blk_dev_ops ref</h3></header><dl><dt class="spec value" id="val-blk_dev_ops_ref"><a href="#val-blk_dev_ops_ref" class="anchor"></a><code><span class="keyword">val</span> blk_dev_ops_ref : <span><span><span><span>(Tjr_fs_shared.Std_types.blk_id, Tjr_fs_shared.Std_types.blk, Tjr_fs_shared.Std_types.t)</span> Tjr_fs_shared.blk_dev_ops</span> option</span> Stdlib.ref</span></code></dt><dt class="spec value" id="val-blk_dev_ops"><a href="#val-blk_dev_ops" class="anchor"></a><code><span class="keyword">val</span> blk_dev_ops : <span><span><span>(Tjr_fs_shared.Std_types.blk_id, Tjr_fs_shared.Std_types.blk, Tjr_fs_shared.Std_types.t)</span> Tjr_fs_shared.blk_dev_ops</span> lazy_t</span></code></dt></dl></section><section><header><h3 id="root-manager"><a href="#root-manager" class="anchor"></a>Root manager</h3></header><dl><dt class="spec value" id="val-roots"><a href="#val-roots" class="anchor"></a><code><span class="keyword">val</span> roots : <span><span><a href="../../Tjr_kv/Kv_intf_v2/index.html#type-rt_blk">Tjr_kv.Kv_intf_v2.rt_blk</a> option</span> Stdlib.ref</span></code></dt><dt class="spec value" id="val-root_man"><a href="#val-root_man" class="anchor"></a><code><span class="keyword">val</span> root_man : <span><span><span>(<a href="../../Tjr_kv/Kv_intf_v2/index.html#type-rt_blk">Tjr_kv.Kv_intf_v2.rt_blk</a>, Tjr_fs_shared.Std_types.t)</span> <a href="../../Tjr_kv/Kv_intf/Root_man_ops/index.html#type-root_man">Tjr_kv.Kv_intf.Root_man_ops.root_man</a></span> Stdlib.Lazy.t</span></code></dt></dl></section><section><header><h3 id="blk-allocator"><a href="#blk-allocator" class="anchor"></a>Blk allocator</h3></header><dl><dt class="spec value" id="val-blk_alloc"><a href="#val-blk_alloc" class="anchor"></a><code><span class="keyword">val</span> blk_alloc : <span><span><span>(<a href="argument-1-S/index.html#type-r">S.r</a>, Tjr_fs_shared.Std_types.t)</span> Tjr_fs_shared.blk_allocator_ops</span> Stdlib.Lazy.t</span></code></dt></dl></section><section><header><h3 id="b-tree/btree-ops/bt-thread"><a href="#b-tree/btree-ops/bt-thread" class="anchor"></a>B-tree/btree ops/bt thread</h3></header><div class="spec module" id="module-Btree_"><a href="#module-Btree_" class="anchor"></a><code><span class="keyword">module</span> <a href="Btree_/index.html">Btree_</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-with_bt_rt"><a href="#val-with_bt_rt" class="anchor"></a><code><span class="keyword">val</span> with_bt_rt : <span><span>(Tjr_fs_shared.Std_types.blk_id, Tjr_monad.With_lwt.lwt)</span> Tjr_monad.with_state</span></code></dt><dt class="spec value" id="val-btree_thread"><a href="#val-btree_thread" class="anchor"></a><code><span class="keyword">val</span> btree_thread : <span>&lt; start_btree_thread : unit <span>&#45;&gt;</span> <span><span>(unit, Tjr_fs_shared.Std_types.t)</span> Tjr_monad.m</span>; &gt; lazy_t</span></code></dt></dl></section><section><header><h3 id="pcache-and-pcache_thread"><a href="#pcache-and-pcache_thread" class="anchor"></a>Pcache and pcache_thread</h3></header><dl><dt class="spec value" id="val-marshalling_config"><a href="#val-marshalling_config" class="anchor"></a><code><span class="keyword">val</span> marshalling_config : <span><span>(<a href="argument-1-S/index.html#type-k">S.k</a>, <a href="argument-1-S/index.html#type-v">S.v</a>, <a href="argument-1-S/index.html#type-r">S.r</a>)</span> Tjr_pcache.Pcache_intf.marshalling_config</span></code></dt></dl><div class="spec module" id="module-Pcache_"><a href="#module-Pcache_" class="anchor"></a><code><span class="keyword">module</span> <a href="Pcache_/index.html">Pcache_</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-pcache_state"><a href="#val-pcache_state" class="anchor"></a><code><span class="keyword">val</span> pcache_state : <span><span><a href="Pcache_/index.html#type-pcache_state">Pcache_.pcache_state</a> option</span> Stdlib.ref</span></code></dt><dd><p>NOTE don't set this directly; use set_pcache_state</p></dd></dl><dl><dt class="spec value" id="val-set_pcache_state"><a href="#val-set_pcache_state" class="anchor"></a><code><span class="keyword">val</span> set_pcache_state : <a href="Pcache_/index.html#type-pcache_state">Pcache_.pcache_state</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-with_pcache"><a href="#val-with_pcache" class="anchor"></a><code><span class="keyword">val</span> with_pcache : <span><span>(<a href="Pcache_/index.html#type-pcache_state">Pcache_.pcache_state</a>, Tjr_monad.With_lwt.lwt)</span> Tjr_monad.with_state</span></code></dt><dt class="spec value" id="val-pcache_thread"><a href="#val-pcache_thread" class="anchor"></a><code><span class="keyword">val</span> pcache_thread : <span>&lt; start_pcache_thread : unit <span>&#45;&gt;</span> <span><span>(unit, Tjr_fs_shared.Std_types.t)</span> Tjr_monad.m</span>; &gt; lazy_t</span></code></dt></dl></section><section><header><h3 id="lru-cache"><a href="#lru-cache" class="anchor"></a>LRU cache</h3></header><div class="spec module" id="module-Lru_"><a href="#module-Lru_" class="anchor"></a><code><span class="keyword">module</span> <a href="Lru_/index.html">Lru_</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec type" id="type-mt_state"><a href="#type-mt_state" class="anchor"></a><code><span class="keyword">type</span> mt_state</code><code> = <a href="Lru_/index.html#type-mt_state">Lru_.mt_state</a></code></dt></dl><dl><dt class="spec value" id="val-lru"><a href="#val-lru" class="anchor"></a><code><span class="keyword">val</span> lru : <span><span>(<a href="argument-1-S/index.html#type-k">S.k</a>, <a href="argument-1-S/index.html#type-v">S.v</a>, <a href="Lru_/index.html#type-mt_state">Lru_.mt_state</a>)</span> <a href="../../Tjr_kv/Lru/class-type-lru/index.html">Tjr_kv.Lru.lru</a></span></code></dt><dt class="spec value" id="val-config"><a href="#val-config" class="anchor"></a><code><span class="keyword">val</span> config : <a href="../../Tjr_kv/Kv_config_runtime/S/index.html#type-config">Tjr_kv.Kv_config_runtime.S.config</a></code></dt><dt class="spec value" id="val-lru_ops"><a href="#val-lru_ops" class="anchor"></a><code><span class="keyword">val</span> lru_ops : <span><span>(<a href="argument-1-S/index.html#type-k">S.k</a>, <a href="argument-1-S/index.html#type-v">S.v</a>, Tjr_fs_shared.Std_types.t)</span> Tjr_lru_cache.Mt_intf.mt_ops</span></code></dt></dl></section></div></body></html>