<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Kv_hash__Merge_process (kv_hash.Kv_hash__Merge_process)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">kv_hash</a> &#x00BB; Kv_hash__Merge_process</nav><h1>Module <code>Kv_hash__Merge_process</code></h1><p>A process that is responsible for merging data into the main KV store.</p><p>Readers can still access the store whilst the merge is in process.</p><p>The merge process is forked from the frontend. It has access to the log entries (as a hashtable) and the &quot;current&quot; partition. During the merge, the partition may change. Thus, there needs to be a way for the merge process to communicate the updated partition back to the frontend. Moreover, the partition needs to be shared with any RO processes. The simplest way to do this is just to serialize the partition to a file &quot;partition_1234&quot;, where the &quot;1234&quot; is some nonce number. Then change the number in the control block, and delete the old file.</p></header><dl><dt class="spec type" id="type-op"><a href="#type-op" class="anchor"></a><code><span class="keyword">type</span> op</code><code> = string * <span>[ <span>`Insert of string</span> <span>| `Delete</span> ]</span></code></dt><dd><p>Operations are insert: (k,`Insert v), or delete: (k,`Delete)</p></dd></dl><div class="spec module" id="module-Partition_ii"><a href="#module-Partition_ii" class="anchor"></a><code><span class="keyword">module</span> Partition_ii = <a href="../Kv_hash/Partition/index.html#module-Partition_ii">Kv_hash.Partition.Partition_ii</a></code></div><div class="spec module" id="module-Make"><a href="#module-Make" class="anchor"></a><code><span class="keyword">module</span> <a href="Make/index.html">Make</a> : <span class="keyword">functor</span> (<a href="Make/argument-1-S/index.html">S</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span>) <span>&#45;&gt;</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></div></body></html>