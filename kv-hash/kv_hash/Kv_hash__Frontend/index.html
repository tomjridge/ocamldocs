<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Kv_hash__Frontend (kv_hash.Kv_hash__Frontend)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">kv_hash</a> &#x00BB; Kv_hash__Frontend</nav><h1>Module <code>Kv_hash__Frontend</code></h1><p>The frontend: record updates in two logs (rotating between them).</p></header><aside><p>Sequence of events:</p><ul><li>log_n becomes full</li><li>finalise log_n:</li><li>check previous merge (if any) has completed</li><li>reload partition (if changed) for working with log_(n+1)</li><li>start new merge for log_n</li><li>merge entries</li><li>if partition changed, write to disk, and notify main thread</li><li>start new log_(n+1)</li></ul></aside><div class="spec module" id="module-Nv_map_ss_"><a href="#module-Nv_map_ss_" class="anchor"></a><code><span class="keyword">module</span> Nv_map_ss_ = <a href="../Kv_hash/Nv_map_ss_private/index.html#module-Nv_map_ss0">Kv_hash.Nv_map_ss_private.Nv_map_ss0</a></code></div><div class="spec module" id="module-Merge_process_"><a href="#module-Merge_process_" class="anchor"></a><code><span class="keyword">module</span> <a href="Merge_process_/index.html">Merge_process_</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-KV"><a href="#module-KV" class="anchor"></a><code><span class="keyword">module</span> <a href="KV/index.html">KV</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Op"><a href="#module-Op" class="anchor"></a><code><span class="keyword">module</span> <a href="Op/index.html">Op</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Log_file_w"><a href="#module-Log_file_w" class="anchor"></a><code><span class="keyword">module</span> <a href="Log_file_w/index.html">Log_file_w</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Log_file_r"><a href="#module-Log_file_r" class="anchor"></a><code><span class="keyword">module</span> <a href="Log_file_r/index.html">Log_file_r</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Control_fields"><a href="#module-Control_fields" class="anchor"></a><code><span class="keyword">module</span> <a href="Control_fields/index.html">Control_fields</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Control"><a href="#module-Control" class="anchor"></a><code><span class="keyword">module</span> <a href="Control/index.html">Control</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec module" id="module-Writer_1"><a href="#module-Writer_1" class="anchor"></a><code><span class="keyword">module</span> <a href="Writer_1/index.html">Writer_1</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The writer is responsible for taking updates and recording in log, and periodically rotating logs and firing the merge process.</p></dd></dl><div class="spec module-type" id="module-type-WRITER"><a href="#module-type-WRITER" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-WRITER/index.html">WRITER</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Writer_2"><a href="#module-Writer_2" class="anchor"></a><code><span class="keyword">module</span> <a href="Writer_2/index.html">Writer_2</a> : <a href="index.html#module-type-WRITER">WRITER</a></code></div><div class="spec module" id="module-Writer"><a href="#module-Writer" class="anchor"></a><code><span class="keyword">module</span> Writer = <a href="index.html#module-Writer_2">Writer_2</a></code></div><div class="spec module" id="module-Test"><a href="#module-Test" class="anchor"></a><code><span class="keyword">module</span> <a href="Test/index.html">Test</a> : <span class="keyword">functor</span> () <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></div></body></html>