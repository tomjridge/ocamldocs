<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Kv_hash (kv_hash.Kv_hash)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">kv_hash</a> &#x00BB; Kv_hash</nav><h1>Module <code>Kv_hash</code></h1><p>Kv-hash, a key-value store</p><nav class="toc"><ul><li><a href="#bucket">Bucket</a></li><li><a href="#bucket-store">Bucket store</a></li><li><a href="#partition">Partition</a></li><li><a href="#non-volatile-map-(int--&gt;-int)">Non-volatile map (int -&gt; int)</a></li><li><a href="#non-volatile-map-(string--&gt;-string)">Non-volatile map (string -&gt; string)</a></li><li><a href="#frontend-and-merge-process">Frontend and merge process</a></li></ul></nav></header><section><header><h3 id="bucket"><a href="#bucket" class="anchor"></a>Bucket</h3></header><dl><dt class="spec module" id="module-Bucket_intf"><a href="#module-Bucket_intf" class="anchor"></a><code><span class="keyword">module</span> <a href="Bucket_intf/index.html">Bucket_intf</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Main interface types for bucket</p></dd></dl><div class="spec module" id="module-Bucket"><a href="#module-Bucket" class="anchor"></a><code><span class="keyword">module</span> <a href="Bucket/index.html">Bucket</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Bucket0"><a href="#module-Bucket0" class="anchor"></a><code><span class="keyword">module</span> Bucket0 = <a href="Bucket/index.html#module-Bucket0">Bucket.Bucket0</a></code></div></section><section><header><h3 id="bucket-store"><a href="#bucket-store" class="anchor"></a>Bucket store</h3></header><dl><dt class="spec module" id="module-Bucket_store_intf"><a href="#module-Bucket_store_intf" class="anchor"></a><code><span class="keyword">module</span> <a href="Bucket_store_intf/index.html">Bucket_store_intf</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>A store of buckets, backed by a file/mmap</p></dd></dl><dl><dt class="spec module" id="module-Bucket_store"><a href="#module-Bucket_store" class="anchor"></a><code><span class="keyword">module</span> <a href="Bucket_store/index.html">Bucket_store</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>A store of buckets, backed by a file/mmap</p></dd></dl><div class="spec module" id="module-Bucket_store0"><a href="#module-Bucket_store0" class="anchor"></a><code><span class="keyword">module</span> Bucket_store0 = <a href="Bucket_store/index.html#module-Bucket_store0">Bucket_store.Bucket_store0</a></code></div></section><section><header><h3 id="partition"><a href="#partition" class="anchor"></a>Partition</h3></header><div class="spec module" id="module-Partition_intf"><a href="#module-Partition_intf" class="anchor"></a><code><span class="keyword">module</span> <a href="Partition_intf/index.html">Partition_intf</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec module" id="module-Partition"><a href="#module-Partition" class="anchor"></a><code><span class="keyword">module</span> <a href="Partition/index.html">Partition</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Top-level bucket partition, implemented using Jane St. Map</p></dd></dl><div class="spec module" id="module-Partition_ii"><a href="#module-Partition_ii" class="anchor"></a><code><span class="keyword">module</span> Partition_ii = <a href="Partition/index.html#module-Partition_ii">Partition.Partition_ii</a></code></div></section><section><header><h3 id="non-volatile-map-(int--&gt;-int)"><a href="#non-volatile-map-(int--&gt;-int)" class="anchor"></a>Non-volatile map (int -&gt; int)</h3></header><dl><dt class="spec module" id="module-Freelist"><a href="#module-Freelist" class="anchor"></a><code><span class="keyword">module</span> <a href="Freelist/index.html">Freelist</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Bucket freelist</p></dd></dl><dl><dt class="spec module" id="module-Nv_map_ii_intf"><a href="#module-Nv_map_ii_intf" class="anchor"></a><code><span class="keyword">module</span> <a href="Nv_map_ii_intf/index.html">Nv_map_ii_intf</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Persistent hashtable interface (for <code>int-&gt;int</code> map)</p></dd></dl><dl><dt class="spec module" id="module-Nv_map_ii"><a href="#module-Nv_map_ii" class="anchor"></a><code><span class="keyword">module</span> <a href="Nv_map_ii/index.html">Nv_map_ii</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>NOTE this doesn't have a values file... it just combines partition and bucket</p></dd></dl><div class="spec module" id="module-Nv_map_ii0"><a href="#module-Nv_map_ii0" class="anchor"></a><code><span class="keyword">module</span> Nv_map_ii0 = <a href="Nv_map_ii/index.html#module-Nv_map_ii0">Nv_map_ii.Nv_map_ii0</a></code></div></section><section><header><h3 id="non-volatile-map-(string--&gt;-string)"><a href="#non-volatile-map-(string--&gt;-string)" class="anchor"></a>Non-volatile map (string -&gt; string)</h3></header><dl><dt class="spec module" id="module-Values_file"><a href="#module-Values_file" class="anchor"></a><code><span class="keyword">module</span> <a href="Values_file/index.html">Values_file</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>A file containing a collection of &quot;values&quot; (the values stored in the <code>int-&gt;int</code> map are the offsets of the real values within the values file).</p></dd></dl><dl><dt class="spec module" id="module-Nv_map_ss_intf"><a href="#module-Nv_map_ss_intf" class="anchor"></a><code><span class="keyword">module</span> <a href="Nv_map_ss_intf/index.html">Nv_map_ss_intf</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>General non-volatile map from string to string</p></dd></dl><dl><dt class="spec module" id="module-Nv_map_ss_private"><a href="#module-Nv_map_ss_private" class="anchor"></a><code><span class="keyword">module</span> <a href="Nv_map_ss_private/index.html">Nv_map_ss_private</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The core implementation is for a map <code>int-&gt;int</code>; here we add some additional support to enable a map <code>string-&gt;string</code>.</p></dd></dl><div class="spec module" id="module-Nv_map_ss0"><a href="#module-Nv_map_ss0" class="anchor"></a><code><span class="keyword">module</span> Nv_map_ss0 = <a href="Nv_map_ss_private/index.html#module-Nv_map_ss0">Nv_map_ss_private.Nv_map_ss0</a></code></div></section><section><header><h3 id="frontend-and-merge-process"><a href="#frontend-and-merge-process" class="anchor"></a>Frontend and merge process</h3></header><dl><dt class="spec module" id="module-Frontend"><a href="#module-Frontend" class="anchor"></a><code><span class="keyword">module</span> <a href="Frontend/index.html">Frontend</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The frontend: record updates in two logs (rotating between them).</p></dd></dl><dl><dt class="spec module" id="module-Merge_process"><a href="#module-Merge_process" class="anchor"></a><code><span class="keyword">module</span> <a href="Merge_process/index.html">Merge_process</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>A process that is responsible for merging data into the main KV store.</p></dd></dl><dl><dt class="spec module" id="module-Frontend_ro"><a href="#module-Frontend_ro" class="anchor"></a><code><span class="keyword">module</span> <a href="Frontend_ro/index.html">Frontend_ro</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Read-only frontend</p></dd></dl><div class="spec module" id="module-Private"><a href="#module-Private" class="anchor"></a><code><span class="keyword">module</span> <a href="Private/index.html">Private</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section></div></body></html>