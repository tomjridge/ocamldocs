<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>V3_intf (tjr_impfs.Tjr_impfs_v3.V3_intf)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tjr_impfs</a> &#x00BB; <a href="../index.html">Tjr_impfs_v3</a> &#x00BB; V3_intf</nav><header class="odoc-preamble"><h1>Module <code><span>Tjr_impfs_v3.V3_intf</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#preamble">Preamble</a></li><li><a href="#basic-types,-extended-types">Basic types, extended types</a></li><li><a href="#abstract-types-describing-implementation-in-terms-of-levels-and-stages">Abstract types describing implementation in terms of levels and stages</a></li></ul></nav><div class="odoc-content"><p>Interfaces describing the abstract development of V3.</p><p>Levels/layers are the layers from standard software engineering. For us, level 0 is the topmost, and level 1 sits underneath etc.</p><ul><li>Level 0: fuse integration</li><li>Level 1: operations, with explicit thread identifiers, used for locking resources</li><li>Level 2: operations without thread identifiers; &quot;raw&quot; interface used by level 1</li></ul><p>Stages are related to time: stage 1 occurs before stage 2 etc. This recognizes that some values are available only at later points in time.</p><h2 id="preamble"><a href="#preamble" class="anchor"></a>Preamble</h2><div class="odoc-spec"><div class="spec module" id="module-Errors" class="anchored"><a href="#module-Errors" class="anchor"></a><code><span><span class="keyword">module</span> </span><span>Errors</span><span> = <span class="xref-unresolved">Tjr_minifs</span>.Minifs_intf.Error_</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-eRROR_CONCURRENT_MODIFICATION" class="anchored"><a href="#val-eRROR_CONCURRENT_MODIFICATION" class="anchor"></a><code><span><span class="keyword">val</span> eRROR_CONCURRENT_MODIFICATION : <span>[&gt; `Error_other ]</span></span></code></div><div class="spec-doc"><p>To avoid adding an error that is not in POSIX, we introduce this pseudo error constructor which just default to <code>`Error_other</code></p></div></div><p>NOTE The following are copied from v1_generic.ml</p><div class="odoc-spec"><div class="spec module" id="module-Path_resolution" class="anchored"><a href="#module-Path_resolution" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Path_resolution/index.html">Path_resolution</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Lock_ops" class="anchored"><a href="#module-Lock_ops" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Lock_ops/index.html">Lock_ops</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h2 id="basic-types,-extended-types"><a href="#basic-types,-extended-types" class="anchor"></a>Basic types, extended types</h2><p>From a basic set of types, we construct further types.</p><div class="odoc-spec"><div class="spec module-type" id="module-type-S0" class="anchored"><a href="#module-type-S0" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> </span><span><a href="module-type-S0/index.html">S0</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Very basic types: monadic t, fid, did, sid...</p></div></div><div class="odoc-spec"><div class="spec module" id="module-S1" class="anchored"><a href="#module-S1" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="S1/index.html">S1</a></span><span> (<a href="S1/argument-1-S0/index.html">S0</a> : <a href="module-type-S0/index.html">S0</a>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Types created from basic types</p></div></div><h2 id="abstract-types-describing-implementation-in-terms-of-levels-and-stages"><a href="#abstract-types-describing-implementation-in-terms-of-levels-and-stages" class="anchor"></a>Abstract types describing implementation in terms of levels and stages</h2><div class="odoc-spec"><div class="spec module" id="module-Level2_provides" class="anchored"><a href="#module-Level2_provides" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Level2_provides/index.html">Level2_provides</a></span><span> (<a href="Level2_provides/argument-1-S0/index.html">S0</a> : <a href="module-type-S0/index.html">S0</a>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The values we expect to be present at level 2</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Level1_provides" class="anchored"><a href="#module-Level1_provides" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Level1_provides/index.html">Level1_provides</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Level 1 provides a single &quot;ops&quot; record of operations, parameterized by thread id <code>tid</code></p></div></div><div class="odoc-spec"><div class="spec module" id="module-Level0_provides" class="anchored"><a href="#module-Level0_provides" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Level0_provides/index.html">Level0_provides</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Level 0 provides a single &quot;ops&quot; record of operations, as Minifs_intf.Ops_type.ops; note that we convert Shared_ctxt.buf to ba_buf</p></div></div></div></body></html>