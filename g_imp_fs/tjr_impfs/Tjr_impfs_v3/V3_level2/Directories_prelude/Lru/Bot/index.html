<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Bot (tjr_impfs.Tjr_impfs_v3.V3_level2.Directories_prelude.Lru.Bot)</title><link rel="stylesheet" href="../../../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../../../../index.html">tjr_impfs</a> &#x00BB; <a href="../../../../index.html">Tjr_impfs_v3</a> &#x00BB; <a href="../../../index.html">V3_level2</a> &#x00BB; <a href="../../index.html">Directories_prelude</a> &#x00BB; <a href="../index.html">Lru</a> &#x00BB; Bot</nav><header class="odoc-preamble"><h1>Module <code><span>Lru.Bot</span></code></h1><p>Lowest level (bottom) operations, typically those supported by a persistent on-disk log.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-ops" class="anchored"><a href="#type-ops" class="anchor"></a><code><span><span class="keyword">type</span> <span>('k, 'v, 'bot, 't) ops</span></span><span> = </span><span>{</span></code><table><tr id="type-ops.find_opt" class="anchored"><td class="def record field"><a href="#type-ops.find_opt" class="anchor"></a><code><span>find_opt : <span><span class="type-var">'bot</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'v</span> option</span>, <span class="type-var">'t</span>)</span> <span class="xref-unresolved">Tjr_monad</span>.m</span>;</span></code></td></tr><tr id="type-ops.sync" class="anchored"><td class="def record field"><a href="#type-ops.sync" class="anchor"></a><code><span>sync : <span><span class="type-var">'bot</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(unit, <span class="type-var">'t</span>)</span> <span class="xref-unresolved">Tjr_monad</span>.m</span>;</span></code></td></tr><tr id="type-ops.exec" class="anchored"><td class="def record field"><a href="#type-ops.exec" class="anchor"></a><code><span>exec : <span><span class="type-var">'bot</span> <span class="arrow">&#45;&gt;</span></span> <span>sync:bool <span class="arrow">&#45;&gt;</span></span> <span><span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="../index.html#type-op">op</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(unit, <span class="type-var">'t</span>)</span> <span class="xref-unresolved">Tjr_monad</span>.m</span>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>We hope that the operations are executed linearly; it should be the case that operations (apart from find_opt) on the bottom level always need the &quot;is_syncing&quot; lock held. In this case, exec should presumably always be sync? Or do we allow some buffering here as well, in the case that sync flag is not set? And does an exec force other outstanding operations to sync, or just those in the list given? Or is the semantics that sync is called immediately afterwards, so everything is synced? Yes, this semantics seems simpler. FIXME rename exec to exec_sync and remove sync flag</p></div></div></div></body></html>