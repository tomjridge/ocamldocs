<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tjr_fs_shared (tjr_fs_shared.Tjr_fs_shared)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">tjr_fs_shared</a> &#x00BB; Tjr_fs_shared</nav><h1>Module <code>Tjr_fs_shared</code></h1><p>Common types and defns for file system work.</p><p>A collection of the main types provided by this library.</p><nav class="toc"><ul><li><a href="#a-record-for-the-pair-of-an-initial-state-and-related-operations">A record for the pair of an initial state and related operations</a></li><li><a href="#int-like-types">Int-like types</a></li><li><a href="#buffers">Buffers</a></li><li><a href="#block-related-types">Block-related types</a></li><li><a href="#block-related-implementations">Block-related implementations</a></li><li><a href="#kv-ops">Kv ops</a></li><li><a href="#(shared)-map-ops">(Shared) Map ops</a></li><li><a href="#small-strings,-leq-256-bytes">Small strings, leq 256 bytes</a></li><li><a href="#maps-with-key-traversal:-get_next_binding,-get_prev_binding">Maps with key traversal: get_next_binding, get_prev_binding</a></li><li><a href="#write-back-cache">Write back cache</a></li><li><a href="#file-operations">File operations</a></li><li><a href="#marshalling">Marshalling</a></li><li><a href="#std-types">Std types</a></li><li><a href="#testing">Testing</a></li><li><a href="#log">Log</a></li><li><a href="#runtime-config-support">Runtime config support</a></li></ul></nav></header><section><header><h3 id="a-record-for-the-pair-of-an-initial-state-and-related-operations"><a href="#a-record-for-the-pair-of-an-initial-state-and-related-operations" class="anchor"></a>A record for the pair of an initial state and related operations</h3></header><dl><dt class="spec type" id="type-initial_state_and_ops"><a href="#type-initial_state_and_ops" class="anchor"></a><code><span class="keyword">type</span> <span>('a, 'b) initial_state_and_ops</span></code><code> = <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="../Tjr_fs_shared__/Internal_intf/index.html#type-initial_state_and_ops">Tjr_fs_shared__.Internal_intf.initial_state_and_ops</a></span></code><code> = </code><code>{</code><table class="record"><tr id="type-initial_state_and_ops.initial_state" class="anchored"><td class="def field"><a href="#type-initial_state_and_ops.initial_state" class="anchor"></a><code>initial_state : <span class="type-var">'a</span>;</code></td></tr><tr id="type-initial_state_and_ops.ops" class="anchored"><td class="def field"><a href="#type-initial_state_and_ops.ops" class="anchor"></a><code>ops : <span class="type-var">'b</span>;</code></td></tr></table><code>}</code></dt></dl></section><section><header><h3 id="int-like-types"><a href="#int-like-types" class="anchor"></a>Int-like types</h3></header><dl><dt class="spec module" id="module-Int_like"><a href="#module-Int_like" class="anchor"></a><code><span class="keyword">module</span> <a href="Int_like/index.html">Int_like</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Int-like types with unboxed record wrappers, for documentation purposes</p></dd></dl></section><section><header><h3 id="buffers"><a href="#buffers" class="anchor"></a>Buffers</h3></header><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../Tjr_fs_shared__/index.html#module-Buf_ops">Tjr_fs_shared__.Buf_ops</a></code></span></summary><dl><dt class="spec type" id="type-buf_ops"><a href="#type-buf_ops" class="anchor"></a><code><span class="keyword">type</span> <span>'buf buf_ops</span></code><code> = </code><code>{</code><table class="record"><tr id="type-buf_ops.create" class="anchored"><td class="def field"><a href="#type-buf_ops.create" class="anchor"></a><code>create : int <span>&#45;&gt;</span> <span class="type-var">'buf</span>;</code></td><td class="doc"><p>Assumed to be zero-ed</p></td></tr><tr id="type-buf_ops.get" class="anchored"><td class="def field"><a href="#type-buf_ops.get" class="anchor"></a><code>get : int <span>&#45;&gt;</span> <span class="type-var">'buf</span> <span>&#45;&gt;</span> char;</code></td></tr><tr id="type-buf_ops.set" class="anchored"><td class="def field"><a href="#type-buf_ops.set" class="anchor"></a><code>set : int <span>&#45;&gt;</span> char <span>&#45;&gt;</span> <span class="type-var">'buf</span> <span>&#45;&gt;</span> <span class="type-var">'buf</span>;</code></td></tr><tr id="type-buf_ops.len" class="anchored"><td class="def field"><a href="#type-buf_ops.len" class="anchor"></a><code>len : <span class="type-var">'buf</span> <span>&#45;&gt;</span> int;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-chr0"><a href="#val-chr0" class="anchor"></a><code><span class="keyword">val</span> chr0 : char</code></dt></dl><dl><dt class="spec type" id="type-ba_buf"><a href="#type-ba_buf" class="anchor"></a><code><span class="keyword">type</span> ba_buf</code><code> = <span><span>(char, Stdlib.Bigarray.int8_unsigned_elt, Stdlib.Bigarray.c_layout)</span> Stdlib.Bigarray.Array1.t</span></code></dt><dt class="spec type" id="type-ba_buf_ops"><a href="#type-ba_buf_ops" class="anchor"></a><code><span class="keyword">type</span> ba_buf_ops</code><code> = <span><a href="index.html#type-ba_buf">ba_buf</a> <a href="index.html#type-buf_ops">buf_ops</a></span></code></dt><dt class="spec type" id="type-by_buf_ops"><a href="#type-by_buf_ops" class="anchor"></a><code><span class="keyword">type</span> by_buf_ops</code><code> = <span>bytes <a href="index.html#type-buf_ops">buf_ops</a></span></code></dt></dl></details></div></div></div><dl><dt class="spec module" id="module-Buf_factory"><a href="#module-Buf_factory" class="anchor"></a><code><span class="keyword">module</span> <a href="Buf_factory/index.html">Buf_factory</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Common buffer operations</p></dd></dl><div class="spec module" id="module-Buf_as_bigarray"><a href="#module-Buf_as_bigarray" class="anchor"></a><code><span class="keyword">module</span> Buf_as_bigarray = <a href="Buf_factory/index.html#module-Buf_as_bigarray">Buf_factory.Buf_as_bigarray</a></code></div><div class="spec module" id="module-Buf_as_bytes"><a href="#module-Buf_as_bytes" class="anchor"></a><code><span class="keyword">module</span> Buf_as_bytes = <a href="Buf_factory/index.html#module-Buf_as_bytes">Buf_factory.Buf_as_bytes</a></code></div><dl><dt class="spec value" id="val-ba_buf_ops"><a href="#val-ba_buf_ops" class="anchor"></a><code><span class="keyword">val</span> ba_buf_ops : <a href="../Tjr_fs_shared__Buf_factory/Buf_as_bigarray/index.html#type-ba_buf_ops">Buf_as_bigarray.ba_buf_ops</a></code></dt><dt class="spec value" id="val-by_buf_ops"><a href="#val-by_buf_ops" class="anchor"></a><code><span class="keyword">val</span> by_buf_ops : <a href="../Tjr_fs_shared__Buf_factory/Buf_as_bytes/index.html#type-by_buf_ops">Buf_as_bytes.by_buf_ops</a></code></dt></dl><dl><dt class="spec module" id="module-Buffers_from_btree"><a href="#module-Buffers_from_btree" class="anchor"></a><code><span class="keyword">module</span> <a href="Buffers_from_btree/index.html">Buffers_from_btree</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>FIXME move this elsewhere eg fs_shared (and combine with other similar modules)</p></dd></dl></section><section><header><h3 id="block-related-types"><a href="#block-related-types" class="anchor"></a>Block-related types</h3></header><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../Tjr_fs_shared__/index.html#module-Blk_intf">Tjr_fs_shared__.Blk_intf</a></code></span></summary><aside><p>Blk-related interfaces</p><p>The main choices:</p><ul><li>blk implementation (string, bytes, buf/bigarray etc)</li><li>blk_id (presumably int, but perhaps a pair of (dev,int) )</li><li>blk_dev (in mem, on file, on dev etc)</li></ul></aside><div class="spec module" id="module-Blk_sz"><a href="#module-Blk_sz" class="anchor"></a><code><span class="keyword">module</span> Blk_sz = <a href="../Tjr_fs_shared__/Blk_intf/index.html#module-Blk_sz">Tjr_fs_shared__.Blk_intf.Blk_sz</a></code></div><dl><dt class="spec type" id="type-blk_sz"><a href="#type-blk_sz" class="anchor"></a><code><span class="keyword">type</span> blk_sz</code><code> = <a href="Blk_sz/index.html#type-blk_sz">Blk_sz.blk_sz</a></code></dt></dl><dl><dt class="spec value" id="val-blk_sz_4096"><a href="#val-blk_sz_4096" class="anchor"></a><code><span class="keyword">val</span> blk_sz_4096 : <a href="Blk_sz/index.html#type-blk_sz">Blk_sz.blk_sz</a></code></dt></dl><dl><dt class="spec module" id="module-Blk_id_as_int"><a href="#module-Blk_id_as_int" class="anchor"></a><code><span class="keyword">module</span> Blk_id_as_int = <a href="../Tjr_fs_shared__/Blk_intf/index.html#module-Blk_id_as_int">Tjr_fs_shared__.Blk_intf.Blk_id_as_int</a></code></dt><dd><p>This is a common instance of blk_id; we don't open it by default because we want most code to be independent of the exact repn. of blk_id NOTE do not open this module FIXME replace with <code>{ blk_id:'a}</code> and <code>{ blk_id:int}</code> record</p></dd></dl><div class="spec module" id="module-Blk_ops"><a href="#module-Blk_ops" class="anchor"></a><code><span class="keyword">module</span> Blk_ops = <a href="../Tjr_fs_shared__/Blk_intf/index.html#module-Blk_ops">Tjr_fs_shared__.Blk_intf.Blk_ops</a></code></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="index.html#module-Blk_ops">Blk_ops</a></code></span></summary><dl><dt class="spec type" id="type-blk_ops"><a href="#type-blk_ops" class="anchor"></a><code><span class="keyword">type</span> <span>'blk blk_ops</span></code><code> = </code><code>{</code><table class="record"><tr id="type-blk_ops.blk_sz" class="anchored"><td class="def field"><a href="#type-blk_ops.blk_sz" class="anchor"></a><code>blk_sz : <a href="index.html#type-blk_sz">blk_sz</a>;</code></td></tr><tr id="type-blk_ops.of_string" class="anchored"><td class="def field"><a href="#type-blk_ops.of_string" class="anchor"></a><code>of_string : string <span>&#45;&gt;</span> <span class="type-var">'blk</span>;</code></td></tr><tr id="type-blk_ops.to_string" class="anchored"><td class="def field"><a href="#type-blk_ops.to_string" class="anchor"></a><code>to_string : <span class="type-var">'blk</span> <span>&#45;&gt;</span> string;</code></td></tr><tr id="type-blk_ops.of_bytes" class="anchored"><td class="def field"><a href="#type-blk_ops.of_bytes" class="anchor"></a><code>of_bytes : bytes <span>&#45;&gt;</span> <span class="type-var">'blk</span>;</code></td></tr><tr id="type-blk_ops.to_bytes" class="anchored"><td class="def field"><a href="#type-blk_ops.to_bytes" class="anchor"></a><code>to_bytes : <span class="type-var">'blk</span> <span>&#45;&gt;</span> bytes;</code></td></tr></table><code>}</code></dt><dd><p>NOTE Conversion to a blk is expected (and the common instances do, indeed!) to pad if the string/bytes are not long enough.</p><p>NOTE since blk_sz is expected to be fixed for a given blk type, we don't include as a parameter on the main interface methods</p></dd></dl></details></div></div></div><div class="spec module" id="module-Blk_dev_ops"><a href="#module-Blk_dev_ops" class="anchor"></a><code><span class="keyword">module</span> Blk_dev_ops = <a href="../Tjr_fs_shared__/Blk_intf/index.html#module-Blk_dev_ops">Tjr_fs_shared__.Blk_intf.Blk_dev_ops</a></code></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="index.html#module-Blk_dev_ops">Blk_dev_ops</a></code></span></summary><dl><dt class="spec type" id="type-blk_dev_ops"><a href="#type-blk_dev_ops" class="anchor"></a><code><span class="keyword">type</span> <span>('blk_id, 'blk, 't) blk_dev_ops</span></code><code> = </code><code>{</code><table class="record"><tr id="type-blk_dev_ops.blk_sz" class="anchored"><td class="def field"><a href="#type-blk_dev_ops.blk_sz" class="anchor"></a><code>blk_sz : <a href="index.html#type-blk_sz">blk_sz</a>;</code></td></tr><tr id="type-blk_dev_ops.write" class="anchored"><td class="def field"><a href="#type-blk_dev_ops.write" class="anchor"></a><code>write : <span>blk_id:<span class="type-var">'blk_id</span></span> <span>&#45;&gt;</span> <span>blk:<span class="type-var">'blk</span></span> <span>&#45;&gt;</span> <span><span>(unit, <span class="type-var">'t</span>)</span> Tjr_monad.m</span>;</code></td></tr><tr id="type-blk_dev_ops.read" class="anchored"><td class="def field"><a href="#type-blk_dev_ops.read" class="anchor"></a><code>read : <span>blk_id:<span class="type-var">'blk_id</span></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'blk</span>, <span class="type-var">'t</span>)</span> Tjr_monad.m</span>;</code></td></tr><tr id="type-blk_dev_ops.write_many" class="anchored"><td class="def field"><a href="#type-blk_dev_ops.write_many" class="anchor"></a><code>write_many : <span><span>(<span class="type-var">'blk_id</span> * <span class="type-var">'blk</span>)</span> list</span> <span>&#45;&gt;</span> <span><span>(unit, <span class="type-var">'t</span>)</span> Tjr_monad.m</span>;</code></td></tr></table><code>}</code></dt><dd><p>A block device: read and write blocks.</p></dd></dl></details></div></div></div><div class="spec module" id="module-Blk_allocator_ops"><a href="#module-Blk_allocator_ops" class="anchor"></a><code><span class="keyword">module</span> Blk_allocator_ops = <a href="../Tjr_fs_shared__/Blk_intf/index.html#module-Blk_allocator_ops">Tjr_fs_shared__.Blk_intf.Blk_allocator_ops</a></code></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="index.html#module-Blk_allocator_ops">Blk_allocator_ops</a></code></span></summary><aside><p>A type for managing the free space on the disk.</p></aside><dl><dt class="spec type" id="type-blk_allocator_ops"><a href="#type-blk_allocator_ops" class="anchor"></a><code><span class="keyword">type</span> <span>('blk_id, 't) blk_allocator_ops</span></code><code> = </code><code>{</code><table class="record"><tr id="type-blk_allocator_ops.blk_alloc" class="anchored"><td class="def field"><a href="#type-blk_allocator_ops.blk_alloc" class="anchor"></a><code>blk_alloc : unit <span>&#45;&gt;</span> <span><span>(<span class="type-var">'blk_id</span>, <span class="type-var">'t</span>)</span> Tjr_monad.m</span>;</code></td></tr><tr id="type-blk_allocator_ops.blk_free" class="anchored"><td class="def field"><a href="#type-blk_allocator_ops.blk_free" class="anchor"></a><code>blk_free : <span class="type-var">'blk_id</span> <span>&#45;&gt;</span> <span><span>(unit, <span class="type-var">'t</span>)</span> Tjr_monad.m</span>;</code></td></tr></table><code>}</code></dt><dd><p>NOTE we assume alloc never fails, or that error is handled elsewhere in the monad; fields were named alloc and free</p></dd></dl></details></div></div></div></details></div></div></div></section><section><header><h3 id="block-related-implementations"><a href="#block-related-implementations" class="anchor"></a>Block-related implementations</h3></header><div class="spec module" id="module-Blk_factory"><a href="#module-Blk_factory" class="anchor"></a><code><span class="keyword">module</span> <a href="Blk_factory/index.html">Blk_factory</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec module" id="module-Blk_dev_factory"><a href="#module-Blk_dev_factory" class="anchor"></a><code><span class="keyword">module</span> <a href="Blk_dev_factory/index.html">Blk_dev_factory</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Common blk devs; don't open</p></dd></dl><div class="spec module" id="module-Root_block"><a href="#module-Root_block" class="anchor"></a><code><span class="keyword">module</span> <a href="Root_block/index.html">Root_block</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h3 id="kv-ops"><a href="#kv-ops" class="anchor"></a>Kv ops</h3></header><dl><dt class="spec module" id="module-Kvop"><a href="#module-Kvop" class="anchor"></a><code><span class="keyword">module</span> <a href="Kvop/index.html">Kvop</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>A concrete type for insert and delete operations. Don't open.</p></dd></dl><dl><dt class="spec type" id="type-kvop"><a href="#type-kvop" class="anchor"></a><code><span class="keyword">type</span> <span>('k, 'v) kvop</span></code><code> = <span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="Kvop/index.html#type-kvop">Kvop.kvop</a></span></code></dt></dl><div class="spec module" id="module-Kvop_map"><a href="#module-Kvop_map" class="anchor"></a><code><span class="keyword">module</span> Kvop_map = <a href="Kvop/index.html#module-Kvop_map">Kvop.Kvop_map</a></code></div></section><section><header><h3 id="(shared)-map-ops"><a href="#(shared)-map-ops" class="anchor"></a>(Shared) Map ops</h3></header><aside><p>FIXME do we want to include this type at top level?</p></aside><dl><dt class="spec module" id="module-Shared_map_ops"><a href="#module-Shared_map_ops" class="anchor"></a><code><span class="keyword">module</span> <a href="Shared_map_ops/index.html">Shared_map_ops</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Map operations find,ins,del, in; insert_all; make_insert_many FIXME? note may clash with other &quot;map_ops&quot; so we don't include at the top-level</p></dd></dl></section><section><header><h3 id="small-strings,-leq-256-bytes"><a href="#small-strings,-leq-256-bytes" class="anchor"></a>Small strings, leq 256 bytes</h3></header><div class="spec module" id="module-Str_256"><a href="#module-Str_256" class="anchor"></a><code><span class="keyword">module</span> <a href="Str_256/index.html">Str_256</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec type" id="type-str_256"><a href="#type-str_256" class="anchor"></a><code><span class="keyword">type</span> str_256</code><code> = <a href="Str_256/index.html#type-str_256">Str_256.str_256</a></code></dt></dl></section><section><header><h3 id="maps-with-key-traversal:-get_next_binding,-get_prev_binding"><a href="#maps-with-key-traversal:-get_next_binding,-get_prev_binding" class="anchor"></a>Maps with key traversal: get_next_binding, get_prev_binding</h3></header><div class="spec module" id="module-Map_with_key_traversal"><a href="#module-Map_with_key_traversal" class="anchor"></a><code><span class="keyword">module</span> <a href="Map_with_key_traversal/index.html">Map_with_key_traversal</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h3 id="write-back-cache"><a href="#write-back-cache" class="anchor"></a>Write back cache</h3></header><dl><dt class="spec module" id="module-Write_back_cache"><a href="#module-Write_back_cache" class="anchor"></a><code><span class="keyword">module</span> <a href="Write_back_cache/index.html">Write_back_cache</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>A wrapper around pqwy/lru.</p></dd></dl><div class="spec module" id="module-Write_back_cache_v2_DONT_USE"><a href="#module-Write_back_cache_v2_DONT_USE" class="anchor"></a><code><span class="keyword">module</span> Write_back_cache_v2_DONT_USE = <a href="../Tjr_fs_shared__/index.html#module-Write_back_cache_v2">Tjr_fs_shared__.Write_back_cache_v2</a></code></div></section><section><header><h3 id="file-operations"><a href="#file-operations" class="anchor"></a>File operations</h3></header><dl><dt class="spec module" id="module-File_ops"><a href="#module-File_ops" class="anchor"></a><code><span class="keyword">module</span> <a href="File_ops/index.html">File_ops</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>To make the code more uniform, we assume various &quot;normal&quot; file operations (ie over the local filesystem) are available in the monad. Of course, these operations are imperative since they use a real underlying filesystem.</p></dd></dl><dl><dt class="spec value" id="val-lwt_file_ops"><a href="#val-lwt_file_ops" class="anchor"></a><code><span class="keyword">val</span> lwt_file_ops : <span><span>(<a href="File_ops/Lwt_file_ops__ba_buf/index.html#type-fd">File_ops.Lwt_file_ops__ba_buf.fd</a>, <a href="File_ops/Lwt_file_ops__ba_buf/index.html#type-blk">File_ops.Lwt_file_ops__ba_buf.blk</a>, Tjr_monad.lwt)</span> <a href="File_ops/index.html#type-file_ops">File_ops.file_ops</a></span></code></dt></dl></section><section><header><h3 id="marshalling"><a href="#marshalling" class="anchor"></a>Marshalling</h3></header><aside><p>There are basically two types of marshalling one might consider. They differ in the behaviour when attempting to marshal to a point in a buffer where the remaining space is not sufficient. In the first &quot;max-size-based&quot; model, the marshaller knows the max size of an element, and the remaining space, and then can determine ahead of marshalling if the space is (potentially) not sufficient. In this case, the marshaller can abort early without attempting any modification of the buffer. However, it may be that the particular element would have actually fit the space, so the approach may be inefficient. Maybe the marshaller can calculate the marshalled size of each element (without actually performing the marshalling). As mentioned in the bin_prot documentation, this is rare because being able to calculate the marshalled size of an elt is often as difficult as trying to marshal the element (and failing when the space is insufficient). So if we assume the decision is based on the max-size, this approach may be inefficient. However, crucially, in the case that the marshalling is not attempted because of insufficient space, the buffer is unchanged.</p><p>This should be contrasted with the &quot;always-try-to-write&quot; approach, where the marshalling is attempted regardless of the available space. If an error occurs (lack of space), the marshalling is aborted. In this case, the buffer will almost certainly be altered from the write position onwards (because it is too costly to record what these bytes are and replace them on a failed marshal).</p><p>The B-tree datastructure arguably favours the &quot;max-size-based&quot; model, and so this is mostly the approach we take here.</p></aside><div class="spec module" id="module-Marshal_factory"><a href="#module-Marshal_factory" class="anchor"></a><code><span class="keyword">module</span> <a href="Marshal_factory/index.html">Marshal_factory</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec type" id="type-mshlr"><a href="#type-mshlr" class="anchor"></a><code><span class="keyword">type</span> <span>('a, 'buf) mshlr</span></code><code> = <span><span>(<span class="type-var">'a</span>, <span class="type-var">'buf</span>)</span> <a href="Marshal_factory/index.html#type-mshlr">Marshal_factory.mshlr</a></span></code><code> = </code><code>{</code><table class="record"><tr id="type-mshlr.max_elt_sz" class="anchored"><td class="def field"><a href="#type-mshlr.max_elt_sz" class="anchor"></a><code>max_elt_sz : int;</code></td></tr><tr id="type-mshlr.mshl" class="anchored"><td class="def field"><a href="#type-mshlr.mshl" class="anchor"></a><code>mshl : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'buf</span> * int)</span> <span>&#45;&gt;</span> <span class="type-var">'buf</span> * int;</code></td></tr><tr id="type-mshlr.umshl" class="anchored"><td class="def field"><a href="#type-mshlr.umshl" class="anchor"></a><code>umshl : <span class="type-var">'buf</span> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span> * int;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-kv_mshlr"><a href="#type-kv_mshlr" class="anchor"></a><code><span class="keyword">type</span> <span>('k, 'v, 'buf) kv_mshlr</span></code><code> = <span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'buf</span>)</span> <a href="Marshal_factory/index.html#type-kv_mshlr">Marshal_factory.kv_mshlr</a></span></code><code> = </code><code>{</code><table class="record"><tr id="type-kv_mshlr.k_mshlr" class="anchored"><td class="def field"><a href="#type-kv_mshlr.k_mshlr" class="anchor"></a><code>k_mshlr : <span><span>(<span class="type-var">'k</span>, <span class="type-var">'buf</span>)</span> <a href="index.html#type-mshlr">mshlr</a></span>;</code></td></tr><tr id="type-kv_mshlr.v_mshlr" class="anchored"><td class="def field"><a href="#type-kv_mshlr.v_mshlr" class="anchor"></a><code>v_mshlr : <span><span>(<span class="type-var">'v</span>, <span class="type-var">'buf</span>)</span> <a href="index.html#type-mshlr">mshlr</a></span>;</code></td></tr></table><code>}</code></dt></dl></section><section><header><h3 id="std-types"><a href="#std-types" class="anchor"></a>Std types</h3></header><div class="spec module" id="module-Std_types"><a href="#module-Std_types" class="anchor"></a><code><span class="keyword">module</span> <a href="Std_types/index.html">Std_types</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h3 id="testing"><a href="#testing" class="anchor"></a>Testing</h3></header><dl><dt class="spec module" id="module-Test"><a href="#module-Test" class="anchor"></a><code><span class="keyword">module</span> <a href="Test/index.html">Test</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Support for basic testing, controlled by optcomp</p></dd></dl></section><section><header><h3 id="log"><a href="#log" class="anchor"></a>Log</h3></header><div class="spec module" id="module-Log"><a href="#module-Log" class="anchor"></a><code><span class="keyword">module</span> <a href="Log/index.html">Log</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h3 id="runtime-config-support"><a href="#runtime-config-support" class="anchor"></a>Runtime config support</h3></header><dl><dt class="spec value" id="val-runtime_config_factory"><a href="#val-runtime_config_factory" class="anchor"></a><code><span class="keyword">val</span> runtime_config_factory : &lt; make : <span>default:<span><span class="type-var">'a</span> option</span></span> <span>&#45;&gt;</span> <span>filename:string</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../Tjr_fs_shared__/Runtime_config_factory/index.html#type-runtime_config">Tjr_fs_shared__.Runtime_config_factory.runtime_config</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Stdlib.Lazy.t</span>; &gt;</code></dt></dl></section></div></body></html>