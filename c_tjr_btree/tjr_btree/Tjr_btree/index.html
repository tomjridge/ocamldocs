<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tjr_btree (tjr_btree.Tjr_btree)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">tjr_btree</a> &#x00BB; Tjr_btree</nav><h1>Module <code>Tjr_btree</code></h1><p>Export the main functionality of this library.</p><p>Usage: open Tjr_btree;; open Tjr_btree.Btree_intf;;</p><nav class="toc"><ul><li><a href="#main-interfaces">Main interfaces</a></li><li><a href="#bin-prot-marshalling">Bin prot marshalling</a></li><li><a href="#misc">Misc</a></li></ul></nav></header><aside> 
<img src="https://docs.google.com/drawings/d/e/2PACX-1vSbPmP9hfqwpYdJefrAYVY_7nSf6Mf5kzAXHYEaaAbw6cLwkWJH9GImYG_4KwKRDLOOjDGMvePbodwt/pub?w=1137&amp;h=766"> 
</aside><section><header><h3 id="main-interfaces"><a href="#main-interfaces" class="anchor"></a>Main interfaces</h3></header><dl><dt class="spec module" id="module-Btree_intf"><a href="#module-Btree_intf" class="anchor"></a><code><span class="keyword">module</span> <a href="Btree_intf/index.html">Btree_intf</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>A collection of the main interfaces. This should be read first.</p></dd></dl><div class="spec module" id="module-Pvt"><a href="#module-Pvt" class="anchor"></a><code><span class="keyword">module</span> <a href="Pvt/index.html">Pvt</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec module" id="module-Make_1"><a href="#module-Make_1" class="anchor"></a><code><span class="keyword">module</span> <a href="Make_1/index.html">Make_1</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Main functionality: disk to map</p></dd></dl><dl><dt class="spec module" id="module-Make_5"><a href="#module-Make_5" class="anchor"></a><code><span class="keyword">module</span> <a href="Make_5/index.html">Make_5</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Like make_1, but using bin_prot marshalling</p></dd></dl><aside><p><code>Make_5</code> main interfaces:</p><pre><code class="ml">module type S = sig
  type k
  type v
  type r
  type t
  val k_cmp: k -&gt; k -&gt; int
  val monad_ops: t monad_ops
  val cs: Constants.constants

  val k_mshlr: k bp_mshlr
  val v_mshlr: v bp_mshlr
  val r_mshlr: r bp_mshlr

  val r_cmp: r -&gt; r -&gt; int (* for wbc *)
end

  type ('k,'v,'r,'ls,'t) bt_1 = &lt;
    map_ops_with_ls: ('k,'v,'r,'ls,'t) map_ops_with_ls
  &gt;

  type ('k,'v,'r,'ls,'t) bt_2 = &lt;
    flush_wbc: unit -&gt; (unit,'t)m;
    sync_key: 'k -&gt; (unit,'t)m;
    map_ops_with_ls: ('k,'v,'r,'ls,'t) map_ops_with_ls
  &gt;

  type ('k,'v,'r,'t,'ls,'blk,'dnode,'wbc) btree_factory = &lt;
    (* method blk_dev_ops: ('r,'blk,'t) blk_dev_ops *)
    (* method blk_allocator_ops: ('r,'t)blk_allocator_ops *)
    empty_leaf_as_blk: 'blk;
    wbc_factory: ('r,'dnode,'wbc)wbc_factory;
    make_uncached: ('r, 't) with_btree_root -&gt; ('k,'v,'r,'ls,'t) bt_1;
    make_cached_1: ('r, 't) with_btree_root -&gt; ('wbc,'t)with_state -&gt; ('k,'v,'r,'ls,'t) bt_2;
    make_cached_2: ('r, 't) with_btree_root -&gt; ('k,'v,'r,'ls,'t) bt_2;
  &gt;</code></pre></aside></section><section><header><h3 id="bin-prot-marshalling"><a href="#bin-prot-marshalling" class="anchor"></a>Bin prot marshalling</h3></header><dl><dt class="spec module" id="module-Bin_prot_marshalling"><a href="#module-Bin_prot_marshalling" class="anchor"></a><code><span class="keyword">module</span> <a href="Bin_prot_marshalling/index.html">Bin_prot_marshalling</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Marshal frames to blocks using binprot FIXME needs polish. Currently assumes that blk_ids are ints.</p></dd></dl></section><section><header><h3 id="misc"><a href="#misc" class="anchor"></a>Misc</h3></header><div class="spec module" id="module-Debug_"><a href="#module-Debug_" class="anchor"></a><code><span class="keyword">module</span> <a href="Debug_/index.html">Debug_</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section></div></body></html>